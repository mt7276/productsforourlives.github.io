# Enable Rewrite Engine
RewriteEngine On

# Allow Direct Access to HTML Pages
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^.]+)$ $1.html [L,QSA]

# Force HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Redirect index.html and index to root (Prevents duplicate content issues)
RewriteCond %{THE_REQUEST} /index(\.html)? [NC]
RewriteRule ^(.*)index(\.html)?$ /$1 [R=301,L]

# Ensure trailing slash for category pages (but not files)
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.+[^/])$ %{REQUEST_URI}/ [L,R=301]

# Fix 301 Redirects (Ensuring all pages are redirected properly)

RedirectMatch 301 ^/blog/?$ https://www.productsforourlives.com/blog/
RedirectMatch 301 ^/night-vision-thermal-imaging/?$ https://www.productsforourlives.com/night-vision-thermal-imaging/
RedirectMatch 301 ^/radar-guns-speed-sensors/?$ https://www.productsforourlives.com/radar-guns-speed-sensors/
RedirectMatch 301 ^/long-range-walkie-talkies/?$ https://www.productsforourlives.com/long-range-walkie-talkies.html
RedirectMatch 301 ^/about/?$ https://www.productsforourlives.com/about/
RedirectMatch 301 ^/blogs/how-a-radar-gun-helped-my-son/?$ https://www.productsforourlives.com/blogs/how-a-radar-gun-helped-my-son/
RedirectMatch 301 ^/blogs/night-vision-adventure/?$ https://www.productsforourlives.com/blogs/night-vision-adventure/

# Ensure sitemap.xml remains accessible
RewriteRule ^sitemap\.xml$ sitemap.xml [L]

# Prevent access to .htaccess itself for security
<Files ~ "^\.ht">
    Order allow,deny
    Deny from all
</Files>
